language: java

jdk:
  - oraclejdk10

services:
  - mongodb
  - redis
  - postgresql
  
install: true

addons:
  postgresql: "10"
  apt:
    packages:
    - postgresql-10
    - postgresql-client-10

before_script:
  - sleep 15
  - psql -c 'create database travis_ci_test;' -U postgres

script:
  - ./mvnw clean verify -P travis
cache:
  directories:
    - '$HOME/.m2/repository'
    - '$HOME/.embedmongo'
    
after_success:
  # test coverage reporting
  - bash <(curl -s https://codecov.io/bash)